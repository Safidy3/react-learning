# Dockerfile.dev (backend)
FROM node:22-alpine
WORKDIR /app

# Install build dependencies for native modules (bcrypt)
RUN apk add --no-cache python3 make g++

RUN npm install -g pnpm

EXPOSE 3000

# Install dependencies on startup and run dev server
CMD ["sh", "-c", "CI=true pnpm install && pnpm dev"]
